import groovy.io.FileType

// Javaプラグイン設定
jar {
    archiveName "ws_hello_async_service_requestor.jar"
}

// ソースフォルダの設定
sourceSets {
    main {
        java {
            srcDir "src/main/proxy"
        }
    }
}

task generateProxy doLast {
    def proxyDir = new File("$projectDir/src/main/proxy")
    proxyDir.deleteDir(); proxyDir.mkdir()
    def wsdlDir = new File("$projectDir/wsdl")
    new File(wsdlDir.path).eachFileMatch(FileType.FILES, ~/[A-Za-z]+.wsdl/) {
        // プロキシコードを生成する
        wsimport(it, proxyDir)
    }
}

// タスクをグループ化する
[generateProxy]*.group = "jaxws"